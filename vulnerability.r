data <- read.csv("data.csv")

min <- min(data$pendiente, na.rm = TRUE) 
max<- max(data$pendiente, na.rm = TRUE)
data$pendiente<-(data$pendiente-max)/(min-max)*100

min <- min(data$dist_inund, na.rm = TRUE) 
max<- max(data$dist_inund, na.rm = TRUE)
data$dist_inund <-(data$dist_inund-max)/(min-max)*100

min <- min(data$dist_rios, na.rm = TRUE) 
max<- max(data$dist_rios, na.rm = TRUE)
data$dist_rios <-(data$dist_rios-max)/(min-max)*100

min <- min(data$dist_snap, na.rm = TRUE) 
max<- max(data$dist_snap, na.rm = TRUE)
data$dist_snap <-(data$dist_snap-min)/(max-min)*100

min <- min(data$dist_urban, na.rm = TRUE) 
max<- max(data$dist_urban, na.rm = TRUE)
data$dist_urban <-(data$dist_urban-max)/(min-max)*100

min <- min(data$dist_vias, na.rm = TRUE) 
max<- max(data$dist_inund, na.rm = TRUE)
data$dist_inund <-(data$dist_inund-max)/(min-max)*100

data[is.na(data)] <- 0

data$adaptative <- data$dist_snap

min <- min(data$adaptative, na.rm = TRUE) 
max<- max(data$adaptative, na.rm = TRUE)
data$adaptative <-(data$adaptative-min)/(max-min)*100


data$sensitivity <- (data$dist_inund+data$salud+data$educacion+data$empleo+data$infraestructura)/5

min <- min(data$sensitivity, na.rm = TRUE) 
max<- max(data$sensitivity, na.rm = TRUE)
data$sensitivity <-(data$sensitivity-min)/(max-min)*100

data$exposure <- (data$pendiente+data$dist_rios+data$dist_vias+data$dist_urban)/4

min <- min(data$exposure, na.rm = TRUE) 
max<- max(data$exposure, na.rm = TRUE)
data$exposure <-(data$exposure-min)/(max-min)*100

data$vulnerability <- (data$exposure+data$sensitivity-data$adaptative)/3

min <- min(data$vulnerability, na.rm = TRUE) 
max<- max(data$vulnerability, na.rm = TRUE)
data$vulnerability <-(data$vulnerability-min)/(max-min)*100


write.csv(data, "vulnerability.csv")
